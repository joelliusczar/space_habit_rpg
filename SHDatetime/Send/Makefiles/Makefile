SH_UTILS_C_PATH = ../SHUtils_C/
include ../SHBase.mk
include $(SH_UTILS_C_PATH)vars.mk
include vars.mk
SH_UTILS_C_HEADERS = $(call rwildcard,$(SH_UTILS_C_PATH),*.h)
SH_UTILS_C_SOURCES = $(call rwildcard,$(SH_UTILS_C_PATH),*.c)
SH_UTILS_C_OBJECTS=$(SH_UTILS_C_SOURCES:.c=.o)
INC+=-I$(SH_UTILS_C_PATH)
SH_LIB_SUFFIX?=
SH_UTILS_C_S=$(SH_UTILS_C)$(SH_LIB_SUFFIX)
SH_UTILS_C_FULL := $(SH_UTILS_C_PATH)$(call libfy,$(SH_UTILS_C_S))
DT_SHARED_FULL=$(call libfy,$(DT_SHARED)$(SH_LIB_SUFFIX))
.DEFAULT_GOAL:=$(DT_SHARED_FULL)
PARENT_PATH ?= .


$(DT_SHARED_FULL): $(OBJECTS) $(SH_UTILS_C_FULL)
	$(CC) $(CFLAGS) $(OBJECTS) -Wl,-rpath,$(SH_UTILS_C_PATH),$(PATH_KEYWORD),$(PARENT_PATH)$(DT_SHARED_FULL) -L$(SH_UTILS_C_PATH) \
	-l$(SH_UTILS_C_S) -shared -o $(DT_SHARED_FULL)


$(SH_UTILS_C_FULL): $(SH_UTILS_C_OBJECTS)
	cd $(SH_UTILS_C_PATH) && $(MAKE) PARENT_PATH=$(SH_UTILS_C_PATH) SH_LIB_SUFFIX=$(SH_LIB_SUFFIX)


