SHUTILS_C_PATH = ../SHUtils_C/
include ../SHBase.mk
include $(SHUTILS_C_PATH)vars.mk
include vars.mk
SHUTILS_C_HEADERS = $(call rwildcard,$(SHUTILS_C_PATH),*.h)
SHUTILS_C_SOURCES = $(call rwildcard,$(SHUTILS_C_PATH),*.c)
SHUTILS_C_OBJECTS=$(SHUTILS_C_SOURCES:.c=.o)
INC+=-I$(SHUTILS_C_PATH)
SH_LIB_SUFFIX?=
SHUTILS_C_S=$(SHUTILS_C)$(SH_LIB_SUFFIX)
SHUTILS_C_FULL := $(SHUTILS_C_PATH)$(call libfy,$(SHUTILS_C_S))
DT_SHARED_FULL=$(call libfy,$(DT_SHARED)$(SH_LIB_SUFFIX))
.DEFAULT_GOAL:=$(DT_SHARED_FULL)
PARENT_PATH ?= .


$(DT_SHARED_FULL): $(OBJECTS) $(SHUTILS_C_FULL)
	$(CC) $(CFLAGS) $(OBJECTS) -Wl,-rpath,$(SHUTILS_C_PATH),$(PATH_KEYWORD),$(PARENT_PATH)$(DT_SHARED_FULL) -L$(SHUTILS_C_PATH) \
	-l$(SHUTILS_C_S) -shared -o $(DT_SHARED_FULL)


$(SHUTILS_C_FULL): $(SHUTILS_C_OBJECTS)
	cd $(SHUTILS_C_PATH) && $(MAKE) PARENT_PATH=$(SHUTILS_C_PATH) SH_LIB_SUFFIX=$(SH_LIB_SUFFIX)


